<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:util="urn:java:org.thymeleaf.extras.utility1.0">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

		<title>Gobou Shop</title>

 		<!-- Google font -->
 		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

 		<!-- Bootstrap -->
 		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>

 		<!-- Slick -->
 		<link type="text/css" rel="stylesheet" href="css/slick.css"/>
 		<link type="text/css" rel="stylesheet" href="css/slick-theme.css"/>

 		<!-- nouislider -->
 		<link type="text/css" rel="stylesheet" href="css/nouislider.min.css"/>

 		<!-- Font Awesome Icon -->
 		<link rel="stylesheet" href="css/font-awesome.min.css">

 		<!-- Custom stlylesheet -->
 		<link type="text/css" rel="stylesheet" href="css/style.css"/>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
<script th:src="@{/ecom/js/jquery-3.6.0.min.js}"></script>
<script>
 $(document).ready(function() {
    updateCartSize(); // Call the updateCartSize() function on page reload
    function updateCartSize() {
        $.ajax({
            type: "GET",
            url: "../cart/updateCartSize",
            success: function(itemCount) {
                $('.cartSize').text(itemCount);
            },
            error: function(xhr, status, error) {
                // Handle error response, if needed
              // alert("Error occurred during item addition.");
                
            }
        });
    }
}); 
</script>

<script th:src="@{/ecom/js/jquery-3.6.0.min.js}"></script>
<script>
 $(document).ready(function() {
	 
	 updateCartTotal(); // Call the updateCartSize() function on page reload
   
    function updateCartTotal() {
        $.ajax({
            type: "GET",
            url: "../cart/updateCartTotal",
            success: function(totalcart) {
                $('.order-total').text("$"+totalcart+".00");
            },
            error: function(xhr, status, error) {
                // Handle error response, if needed
              // alert("Error occurred during item addition.");
                
            }
        });
    }
}); 
</script>


	<script th:src="@{/ecom/js/jquery-3.6.0.min.js}"></script>
		<script >
		function updateItemqty(shoppingcartId, quantity) {
		    var data = {
		    	shoppingcartId: shoppingcartId,
		        quantity: quantity
		    };

		    $.ajax({
		        type: "POST",
		        url: "../cart/updateItemqty",
		        data: data,
		        success: function(itemCount) {
	                console.log("itemCount: ", itemCount);
		            $('.cartSize').text(itemCount);
		            alert("Item added to cart successfully!");
		           
		        },
		        error: function(xhr, status, error) {
		            // Handle error response, if needed
		        	//alert("Error occurred during item addition.");
		        }
		    });
		}
		</script>

<!-- this is for updating wishListSize	 -->
<script th:src="@{/ecom/js/jquery-3.6.0.min.js}"></script>
<script>
 $(document).ready(function() {
	 
	 updateWishListSize(); // Call the updateCartSize() function on page reload
   
    function updateWishListSize() {
        $.ajax({
            type: "GET",
            url: "../wishList/updateWishListSize",
            success: function(itemCount) {
            	$('.wishlistSize').text(itemCount);
            },
            error: function(xhr, status, error) {
                // Handle error response, if needed
              //alert("Error occurred during item addition.");
                
            }
        });
    }
}); 
</script>

		<!-- this is for adding to the cart	 -->
		<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
		<script th:src="@{/ecom/js/jquery-3.6.0.min.js}"></script>
		<script >
		function addItemToCart(productId, quantity) {
		    var data = {
		        productId: productId,
		        quantity: quantity
		    };

		    $.ajax({
		        type: "POST",
		        url: "../cart/add",
		        data: data,
		        success: function(itemCount) {
	                console.log("itemCount: ", itemCount);
		            $('.cartSize').text(itemCount);
		            alert("Item added to cart successfully!");
		           
		        },
		        error: function(xhr, status, error) {
		            // Handle error response, if needed
		        	//alert("Error occurred during item addition.");
		        }
		    });
		}
		</script>
			<!-- this is for adding to the wishList	 -->
		<script th:src="@{/ecom/js/jquery-3.6.0.min.js}"></script>
		<script >
		function addItemToWishList(productId) {
		    var data = {
		        productId: productId,
		    };

		    $.ajax({
		        type: "POST",
		        url: "../wishList/add",
		        data: data,
		        success: function(itemCount) {
	                console.log("itemCount: ", itemCount);
		            $('.wishlistSize').text(itemCount);
		            alert("Item added to wishlist successfully!");
		           
		        },
		        error: function(xhr, status, error) {
		            // Handle error response, if needed
		        	//alert("Error occurred during item addition.");
		        }
		    });
		}
		</script>
		
			<script>
		function validateForm(event) {
			
	
		  var oldpassInput = document.getElementById('oldpass');
		  var oldpassError = document.getElementById('oldpass-error');
		  
		  var passwordInput = document.getElementById('newpassword');
		  var passwordError = document.getElementById('password-error');
		  
		  var confirmPasswordInput = document.getElementById('confirm-password');
		  var confirmPasswordError = document.getElementById('confirm-password-error');
		  
	
		// Check if all fields are filled and no errors exist
		  if (
		 
			oldpassInput.value.trim() !== '' &&
		    passwordInput.value.trim() !== '' &&
		    confirmPasswordInput.value.trim() !== '' &&
		    passwordInput.value === confirmPasswordInput.value 
		   
		  ) {
		    // Submit the form
		    event.target.submit();
		  }else{
			  event.preventDefault(); // Prevent the form from submitting
			  
		
					
					if (oldpassInput.value.trim() === '') {
						oldpassError.textContent = 'Please enter your old password';
					} else {
						oldpassError.textContent = '';
					}
			  
					  if (passwordInput.value.trim() === '') {
						  passwordError.textContent = 'Please enter your new password';
					  } else {
						  passwordError.textContent = '';
					  }
					  
					  if (confirmPasswordInput.value.trim() === '') {
						  confirmPasswordError.textContent = 'Please confirm your password';
					  } else {
						 // Check if password and confirm password match
						if ( passwordInput.value !== confirmPasswordInput.value) {
							confirmPasswordError.textContent = 'Confirm Password does not match';
						}else{
							confirmPasswordError.textContent = '';
						}
						
					  }
					
					}
					  	  
		  }

    </script>
		
<script th:src="@{/ecom/js/jquery-3.6.0.min.js}"></script>		
<script>
  $(document).ready(function() {
	 var status = $('#status').data('status');
	 addActiveClassToTab(status);
   //alert(status);
 
    // You can now use the 'status' variable in your JavaScript code
  });
  
  function addActiveClassToTab(status) {
	  	if(status === 'profile'){
	  		 $('#profile').addClass('active');
	  		 $('#tab1').addClass('active');
	  		 
	  		 $('#changepass').removeClass('active');
	  		 $('#tab3').removeClass('active');
	  	}else{
	  		
	  		 $('#changepass').addClass('active');
	  		 $('#tab3').addClass('active');
	  		 
	  		 $('#profile').removeClass('active');
	  		 $('#tab1').removeClass('active');
	  	}
	  
	   
	  }
</script>		
		
		
		
    </head>
	<body th:object="${productAdd}">
<!-- HEADER -->
		<header>
			<!-- TOP HEADER -->
			<div id="top-header">
				<div class="container">
					<ul class="header-links pull-left">
						<li><a href="#"><i class="fa fa-phone"></i> +91 6230922047</a></li>
						<li><a href="#"><i class="fa fa-envelope-o"></i> goboushop@gmail.com</a></li>
						<li><a href="#"><i class="fa fa-map-marker"></i> Conakry, Guinea</a></li>
					</ul>
					<ul class="header-links pull-right">
						<li><i class="fa fa-user"></i><a href="#" th:text="${session.username != null ? 'hello ' + session.username : 'Hello guest'}"></a></li>
						<li><a href="#"><i class="fa fa-dollar"></i> USD</a></li>
						<li th:if="${session.email == null}"><a th:href="@{../customer/showUserloginPage}"><i class="fa fa-user-o"></i> My Account</a></li>
						<li th:if="${session.email != null}"><a th:href="@{../ecom/profile}"><i class="fa fa-user-o"></i>Profile</a></li>
						<li th:if="${session.email != null}"><a th:href="@{../customer/logout}"><i class="fa fa-sign-out"></i> Logout</a></li>
					</ul>
				</div>
			</div>
			<!-- /TOP HEADER -->

			<!-- MAIN HEADER -->
			<div id="header">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<!-- LOGO -->
						<div class="col-md-3">
							<div class="header-logo">
								<a href="#" class="logo">
									<img th:src="@{/ecom/img/7.PNG}" alt="">
								</a>
							</div>
						</div>
						<!-- /LOGO -->

						<!-- SEARCH BAR -->
						<div class="col-md-6">
							<div class="header-search">
								<form>
									<select class="input-select">
										<option value="0">All Categories</option>
										<option th:each="prodsubcat :${productSubCategorys}" th:value="${prodsubcat.id}" th:text="${prodsubcat.categoryName}">
									</select>
									<input class="input" placeholder="Search here">
									<button class="search-btn">Search</button>
								</form>
							</div>
						</div>
						<!-- /SEARCH BAR -->

						<!-- ACCOUNT -->
						<div class="col-md-3 clearfix">
							<div class="header-ctn">
								<!-- Wishlist -->
								<div >
									<a th:if="${session.email != null}" th:href="@{../ecom/viewWishList}">
										<i class="fa fa-heart-o"></i>
										<span>Your Wishlist</span>
										<div class="qty wishlistSize">0</div>
									</a>
									<a th:if="${session.email == null}" th:href="@{../customer/showUserloginPage}">
										<i class="fa fa-heart-o"></i>
										<span>Your Wishlist</span>
										<div class="qty wishlistSize">0</div>
									</a>
								</div> 
								<!-- /Wishlist -->

								<!-- Cart -->
								<div class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
										<i class="fa fa-shopping-cart"></i>
										<span>Your Cart</span>
										<div class="qty cartSize" >0</div>
									</a>
									<div class="cart-dropdown">
								
										<div class="cart-summary">
											<small class="cartSize">0</small><small>Item(s) selected</small>
											<!-- <small>3 Item(s) selected</small> -->
											<h5></h5>
										</div>
										<div class="cart-btns">
										
										
			
											<a th:if="${session.email != null}" th:href="@{../ecom/viewCart}">View Cart</a>
											<a th:if="${session.email == null}" th:href="@{../customer/showUserloginPage}">View Cart</a>
											
											<a th:if="${session.email != null}" th:href="@{../ecom/checkout}">Checkout  <i class="fa fa-arrow-circle-right"></i></a>
											<a th:if="${session.email == null}" th:href="@{../customer/showUserloginPage}">Checkout  <i class="fa fa-arrow-circle-right"></i></a>
										</div>
									</div>
								</div>
								<!-- /Cart -->

								<!-- Menu Toogle -->
								<div class="menu-toggle">
									<a href="#">
										<i class="fa fa-bars"></i>
										<span>Menu</span>
									</a>
								</div>
								<!-- /Menu Toogle -->
							</div>
						</div>
						<!-- /ACCOUNT -->
					</div>
					<!-- row -->
				</div>
				<!-- container -->
			</div>
			<!-- /MAIN HEADER -->
		</header>
		<!-- /HEADER -->

		<!-- NAVIGATION -->
		<nav id="navigation">
			<!-- container -->
			<div class="container">
				<!-- responsive-nav -->
				<div id="responsive-nav">
					<!-- NAV -->
					<ul class="main-nav nav navbar-nav">
						<li ><a th:href="@{../ecom/showhomepage}">Home</a></li>
						
						<li class="active"><a href="#">Profile</a></li>
						
					</ul>
					<!-- /NAV -->
				</div>
				<!-- /responsive-nav -->
			</div>
			<!-- /container -->
		</nav>
		<!-- /NAVIGATION -->
			<!--  <div class="col-md-12" style="margin-bottom: 0px; margin-top: 20px; margin-left: 30px;">
				<a th:href="@{../ecom/showhomepage}" class="primary-btn2" style="float: left;">Continue Shopping</a>
			</div>  --> 
	

		<!-- SECTION -->
		<div class="section" >
			<!-- container -->
			<div class="container" >
				<!-- row -->
				<div class="row" >
				
					<!-- Product tab -->
					<div class="col-md-12" >
						<div id="product-tab">
							<!-- product tab nav -->
							<ul class="tab-nav" th:data-status="${status}" id="status">
								<li id="profile"><a data-toggle="tab" href="#tab1" >Profile</a></li>
								<li><a data-toggle="tab" href="#tab2">My Order(s)</a></li>
								<li id="changepass"><a data-toggle="tab" href="#tab3" >Security</a></li>
							</ul>
							<!-- /product tab nav -->

							<!-- product tab content -->
							<div class="tab-content">
								<!-- tab1  -->
								<div id="tab1" class="tab-pane fade in">
										<div style="margin-top: 30px;">
	
					<!-- Order Details -->
					<div class="col-md-4 ">
						<div class="section-title text-center">
							<h4 class="title"></h4>
							<p></p>
						</div>
						<div class="order-summary">
							<div class="form-group">
								
							</div>
							<div class="form-group">
								
							</div>
		
						</div>
					
						<div class="input-checkbox">
							
							<label for="terms">
								
								
							</label>
						</div>
						
					</div>
					<!-- /Order Details -->

								
									
							
						
					<!-- Order Details -->
					<div class="col-md-4 order-details">
						<form th:action="@{../customer/updateUser}" th:object="${userprofile}" method="post">
						<input type="hidden"  th:field="*{id}">	
						<input type="hidden"  th:field="*{password}">	
						<input type="hidden"  th:field="*{username}">	
						<input type="hidden"  th:field="${userprofile.usercategory.id}">	
						<input class="input" type="hidden"  placeholder="Email" th:field="*{email}" readonly="readonly">
						<div class="section-title text-center">
						 <span style="color:green;" th:text="${messageupdate}"></span> 
					
						</div>
						
						<div class="order-summary">
							
							<div class="form-group">
								<span  style="margin-right: 10px;">Email </span>
								
								<input class="input" type="text"  placeholder="Email" th:value="*{email}"  readonly="readonly">
								
								
							</div>
							<div class="form-group">
								<span>Full Name</span>
								<input class="input" type="text"  placeholder="Full Name" th:field="*{fullName}">
								
							</div>
							<div class="form-group">
								<span>Contact</span>
								<input class="input" type="text"  placeholder="Contact" th:field="*{mobil_Number}">
								
							</div>
							<div class="form-group">
								<span>Address</span>
								<input class="input" type="text"  placeholder="address" th:field="*{address}">
								
							</div>
						</div>
						
			
						 <input   style="margin-top: 10px; width: 325px; height: 40px;" class="primary-btn order-submit" type="submit" value="Update"  >
						
					
						</form>
						

					</div>
					<!-- /Order Details -->
					
					<!-- Order Details -->
					<div class="col-md-4 ">
						<div class="section-title text-center">
							<h4 class="title"></h4>
							<p></p>
						</div>
						<div class="order-summary">
							<div class="form-group">
								
							</div>
							<div class="form-group">
								
							</div>
		
						</div>
					
						<div class="input-checkbox">
							
							<label for="terms">
							</label>
						</div>
						
					</div>
					<!-- /Order Details -->
		</div>
		<!-- /SECTION -->
								</div>
								<!-- /tab1  -->

								<!-- tab2  -->
								 <div id="tab2" class="tab-pane fade in">
									<div class="row">
										<div class="col-md-12">
									
																			 <!-- Bordered Table -->
								              <table id="example1" class="table table-bordered table-striped">
								                <thead>
								                  <tr>
								                    <th scope="col">Sr.No.</th>
								                    <th scope="col">Date</th>
								                  
								                    <th scope="col">Status</th>
								                    <th scope="col">Total</th>
								                    <th scope="col">Manage</th>
								                   
								                  </tr>
								                </thead>
								               <tbody>
								                  <tr th:each="order : ${orderList}">
								                    <td th:text="${orderStat.index + 1}"></td>
								                    <td th:text="${order.date}"></td>
								              
								                     <td >
								                    <span th:if="${order.status == 'received'}" class="label label-warning" >placed order</span>
								    				<span th:if="${order.status == 'delivered'}" class="label label-success" >received</span>
								                     </td>
								                       <td th:text="'$' + ${order.total}"></td>
								                    <td class="manage">
								                     <a th:href="@{../ecom/profileOrderView(id=${order.id})}" title="view" ><i class="fa fa-fw fa-eye"></i></a>    
								                      
								                   <!--  <a th:href="@{../PurchaseProduct/showorPurchaseProduct(id=${purchaseprod.id})}" title="Add Stock" ><i class="fa fa-fw fa-truck"></i>add stock</a> -->
								                    </td>
								                  </tr>
								                   </tbody>
								               <tfoot>
								              <tr>
								                    <th scope="col">Sr.No.</th>
								                    <th scope="col">Date</th>
								                 
								                    <th scope="col">Status</th>
								                    <th scope="col">Total</th>
								                    <th scope="col">Manage</th>
								                  </tr>
								                </tfoot>
								              </table>
								              <!-- End Bordered Table -->
										</div>
									</div>
								</div> 
								<!-- /tab2  -->

								<!-- tab3  -->
								<div id="tab3" class="tab-pane fade in">
								
						
												<!-- SECTION -->
		<div style="margin-top: 30px;">
	
					<!-- Order Details -->
					<div class="col-md-4 ">
						<div class="section-title text-center">
							<h4 class="title"></h4>
							<p></p>
						</div>
						<div class="order-summary">
							<div class="form-group">
								
							</div>
							<div class="form-group">
								
							</div>
		
						</div>
					
						<div class="input-checkbox">
							
							<label for="terms">
								
								
							</label>
						</div>
						
					</div>
					<!-- /Order Details -->

								
									
							
						
					<!-- Order Details -->
					<div class="col-md-4 order-details">
					
						<form onsubmit="validateForm(event)" th:action="@{../customer/changePassword}" th:object="${user}" method="post"> 
							
						<div class="section-title text-center">
						 <span style="color:red;" th:text="${message}"></span> 
						 <span style="color:green;" th:text="${message6}"></span> 
					
						</div>
						
						<div class="order-summary">
							
							<div class="form-group">
								<span>Old Password</span>
								<input class="input" type="password" name="oldpass" id="oldpass" placeholder="Your Old Password" >
								<span id="oldpass-error" style="color:red;"></span>
							</div>
							<div class="form-group">
								<span>New Password</span>
								<input class="input" type="password" name="newpassword" id="newpassword" placeholder="Password" th:field="*{password}">
								<span id="password-error" style="color:red;"></span>
							</div>
							<div class="form-group">
								<span>Confirm Password</span>
								<input class="input" type="password" name="confirm-password" id="confirm-password" placeholder="Confirm your password" >
								<span id="confirm-password-error" style="color:red;"></span>
							</div>
						</div>
						
			
						 <input   style="margin-top: 10px; width: 325px; height: 40px;" class="primary-btn order-submit" type="submit" value="Change password"  >
						
					
						</form>
						

					</div>
					<!-- /Order Details -->
					
					<!-- Order Details -->
					<div class="col-md-4 ">
						<div class="section-title text-center">
							<h4 class="title"></h4>
							<p></p>
						</div>
						<div class="order-summary">
							<div class="form-group">
								
							</div>
							<div class="form-group">
								
							</div>
		
						</div>
					
						<div class="input-checkbox">
							
							<label for="terms">
							</label>
						</div>
						
					</div>
					<!-- /Order Details -->
		</div>
		<!-- /SECTION -->
									
									
								</div>
								<!-- /tab3  -->
							</div>
							<!-- /product tab content  -->
						</div>
					</div>
					<!-- /product tab -->
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>	
		<!-- /SECTION -->

<!-- FOOTER -->
		<footer id="footer">
			<!-- top footer -->
			<div class="section">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">About Us</h3>
								<p>Gobou shop No 1 online shopping in Guinea</p>
								<ul class="footer-links">
									<li><a href="#"><i class="fa fa-map-marker"></i>Conakry, Guinea</a></li>
									<li><a href="#"><i class="fa fa-phone"></i>+224 620 16 60 89</a></li>
									<li><a href="#"><i class="fa fa-envelope-o"></i>goboushop@gmail.com</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Categories</h3>
								<ul class="footer-links">
									<li><a href="#">Laptops</a></li>
									<li><a href="#">Smartphones</a></li>
									<li><a href="#">Cameras</a></li>
									<li><a href="#">Accessories</a></li>
								</ul>
							</div>
						</div>

						<div class="clearfix visible-xs"></div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Information</h3>
								<ul class="footer-links">
									<li><a href="#">About Us</a></li>
									<li><a href="#">Contact Us</a></li>
									<!-- <li><a href="#">Privacy Policy</a></li>
									<li><a href="#">Orders and Returns</a></li> -->
									<!-- <li><a href="#">Terms & Conditions</a></li> -->
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Service</h3>
								<ul class="footer-links">
									<li th:if="${session.email != null}"><a th:href="@{../ecom/profile}">My Account</a></li>
									<li th:if="${session.email != null}"><a th:href="@{../ecom/viewCart}">View Cart</a></li>
									<li th:if="${session.email != null}"><a th:href="@{../ecom/viewWishList}">Wishlist</a></li>
									<!-- <li><a href="#">Track My Order</a></li>
									<li><a href="#">Help</a></li> -->
								</ul>
							</div>
						</div>
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /top footer -->

			
			<!-- /bottom footer -->
		</footer>
		<!-- /FOOTER -->

		<!-- jQuery Plugins -->
		<script th:src="@{/ecom/js/jquery.min.js}"></script>
		<script th:src="@{/ecom/js/bootstrap.min.js}"></script>
		<script th:src="@{/ecom/js/slick.min.js}"></script>
		<script th:src="@{/ecom/js/nouislider.min.js}"></script>
		<script th:src="@{/ecom/js/jquery.zoom.min.js}"></script>
		<script th:src="@{/ecom/js/main.js}"></script>

	</body>
</html>
